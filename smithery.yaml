# Smithery configuration for MCP App Store Connect
# https://smithery.ai/docs/build/project-config/smithery-yaml

startCommand:
  type: stdio
  configSchema:
    type: object
    required:
      - APP_STORE_ISSUER_ID
      - APP_STORE_KEY_ID
    properties:
      APP_STORE_ISSUER_ID:
        type: string
        title: "Issuer ID"
        description: "Your App Store Connect Issuer ID (found in Users and Access > Keys)"
      APP_STORE_KEY_ID:
        type: string
        title: "Key ID"
        description: "Your App Store Connect API Key ID"
      APP_STORE_PRIVATE_KEY_PATH:
        type: string
        title: "Private Key Path"
        description: "Absolute path to your .p8 private key file (use this OR Private Key)"
      APP_STORE_PRIVATE_KEY:
        type: string
        title: "Private Key"
        description: "Contents of your .p8 private key with newlines as \\n (use this OR Private Key Path)"
  commandFunction: |
    (config) => ({
      command: 'npx',
      args: ['-y', 'mcp-appstore-connect'],
      env: {
        APP_STORE_ISSUER_ID: config.APP_STORE_ISSUER_ID,
        APP_STORE_KEY_ID: config.APP_STORE_KEY_ID,
        ...(config.APP_STORE_PRIVATE_KEY_PATH && { APP_STORE_PRIVATE_KEY_PATH: config.APP_STORE_PRIVATE_KEY_PATH }),
        ...(config.APP_STORE_PRIVATE_KEY && { APP_STORE_PRIVATE_KEY: config.APP_STORE_PRIVATE_KEY })
      }
    })
